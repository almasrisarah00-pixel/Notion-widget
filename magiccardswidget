<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Daily Magic Card</title>
  <style>
    body {
      margin: 0;
      padding: 1rem;
      font-family: sans-serif;
      background: #f8f8f8;
      text-align: center;
    }
    img {
      max-width: 100%;
      height: auto;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
    }
  </style>
</head>
<body>
  <h3>Daily MTG Card</h3>
  <div id="card-container">Loading...</div>

  <script>
    async function getDailyCard() {
      // Get a "deterministic" random card for today using the date
      const today = new Date();
      const seed = today.toISOString().slice(0, 10); // YYYY-MM-DD

      // Hash the date into a number for consistency
      let hash = 0;
      for (let i = 0; i < seed.length; i++) {
        hash = seed.charCodeAt(i) + ((hash << 5) - hash);
      }

      const totalCards = 30000; // Rough estimate; Scryfall has 25k+ cards
      const cardIndex = Math.abs(hash) % totalCards;

      // Use the Scryfall API with pagination
      const pageSize = 175;
      const page = Math.floor(cardIndex / pageSize) + 1;

      try {
        const response = await fetch(`https://api.scryfall.com/cards?page=${page}&order=set`);
        const data = await response.json();
        const card = data.data[cardIndex % pageSize];

        if (card && card.image_uris) {
          document.getElementById('card-container').innerHTML = `
            <img src="${card.image_uris.normal}" alt="${card.name}" />
            <p>${card.name}</p>
          `;
        } else {
          document.getElementById('card-container').innerText = 'Card not found.';
        }
      } catch (e) {
        console.error(e);
        document.getElementById('card-container').innerText = 'Error loading card.';
      }
    }

    getDailyCard();
  </script>
</body>
</html>

